name: Generate videos.json

on:
  push:
    paths:
      - 'videos/**'
  workflow_dispatch:  # –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Ä—É—á–Ω—É—é –∏–∑ GitHub UI

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: üßæ –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
        uses: actions/checkout@v4

      - name: üì¶ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫–∞–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é videos.json
        run: node generate-videos-json.js

      - name: üíæ –ö–æ–º–º–∏—Ç–∏–º –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Ñ–∞–π–ª
        uses: EndBug/add-and-commit@v9
        with:
          author_name: GitHub Action
          author_email: actions@github.com
          message: 'auto: –æ–±–Ω–æ–≤–ª—ë–Ω videos.json'
          add: 'videos/videos.json'
